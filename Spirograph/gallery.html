<!doctype html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link href="bower_components/swipebox/src/css/swipebox.css" rel="stylesheet" />
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link class="dom_munger-ignore" rel="shortcut icon" href="favicon.ico" />
    <title>Inspirograph</title>

    <style>
        html, body {
            font-family: 'Open Sans', sans-serif;
        }

        .row > div {
            padding-top: 15px;
            padding-bottom: 15px;
        }

        h1 {
            text-align: center;
            color: #888;
        }

        @media(max-width: 767px) {
            h1 {
                font-size: 45px;
            }
        }

        @media(min-width: 768px) {
            h1 {
                font-size: 65px;
            }
        }
    </style>

</head>
<body class="spirograph">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12">
                <h1>Inspirograph Gallery</h1>
            </div>
        </div>
        <div class="row image-container">
            <!--<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <a href="http://swipebox.csag.co/images/image-4.jpg" class="swipebox" title="Street">
                    <img class="img-responsive" src="http://swipebox.csag.co/images/image-4.jpg" alt="image">
                </a>
            </div>-->
        </div>
    </div>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/swipebox/src/js/jquery.swipebox.min.js"></script>

    <script type="text/javascript">
        (function ($) {

            var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            function formatDate(unixTimestamp) {
                var date = new Date(unixTimestamp * 1000);
                var output = [];
                output.push(monthNames[date.getMonth()])
                output.push(date.getDate() + ',');
                var hours = date.getHours() % 12;
                hours = hours === 0 ? 12 : hours;
                output.push(hours + ':' + (date.getMinutes()));
                output.push(date.getHours() < 12 ? "AM" : "PM")
                return output.join(' ');
            }

            function formatImagePath(imagepath) {
                return 'http://nathanfriend.com/inspirograph/' + imagepath
            }

            $.ajax({
                type: 'POST',
                url: 'http://nathanfriend.com/inspirograph/getallimagenames.php',
                success: function (images) {
                    console.log(images);
                    for (var image in images) {
                        if (images.hasOwnProperty(image)) {
                            console.log(images[image]);
                            var row = $('<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12"></div>');
                            var link = $('<a href="' + formatImagePath(images[image].filename) + '" class="swipebox" title="' + formatDate(images[image].timestamp) + '">');
                            var img = $('<img class="img-responsive" src="' + formatImagePath(images[image].filename) + '" alt="image">');

                            img.appendTo(link);
                            link.appendTo(row);
                            row.appendTo('.image-container');
                        }
                    }
                },
                dataType: 'JSON'

            });

            $('.swipebox').swipebox();

        })(jQuery);
    </script>

</body>
</html>